<div class="container" style="margin-top: 50px" #alert>
    <h1>จัดการคำถาม</h1>
</div>
<alert-message [type]="alertType" [message]="alertMessage"></alert-message>
<div class="container" style="margin-top: 50px; margin-bottom: 50px;border-bottom: 1px solid #000;max-width: 80% !important;" *ngIf="quizList != null && quizList.length > 0">
    <button type="button" class="btn btn-primary" style="margin-bottom: 10px" (click)="create()" [disabled]="isNew">สร้างใหม่</button>
    <app-list [list]="quizList" [header]="quizeHeader" [showItem]="quizeItem" (deleteEvent)="delete($event)" (editEvent)="edit($event)" (viewEvent)="view($event)" [isDrag]=false></app-list>
</div>
<div class="container" style="margin-top: 50px; margin-bottom: 50px;border-bottom: 1px solid #000;" *ngIf="quizList == null || (quizList != null && quizList.length == 0) ">
    <button type="button" class="btn btn-primary" style="margin-bottom: 10px" (click)="create()" [disabled]="isNew">สร้างใหม่</button>
    <br/>
    No data found.
</div>

<div class="container" *ngIf="isNew || isEdit" #target>
        <form #quizForm="ngForm" (ngSubmit)="onSubmit(quizForm)">

            <div class="form-group row">
                <label for="inputQuizText" class="col-sm-2 col-form-label">คำถาม</label>
                <div class="col-sm-10">
                    <input type="text" class="form-control" id="inputQuizText" placeholder="คำถาม" name="quiz" [(ngModel)]="quiz.quiz">
                </div>
            </div>

            <div class="form-group row">
                <label for="inputQuizPic" class="col-sm-2 col-form-label">ไฟล์คำถาม</label>
                <div class="col-sm-10">
                    <input type="file" class="form-control" id="inputQuizPic" placeholder="คำถาม" accept=".png,.gif,.jpg,.jpeg"  (change)="upload('quiz', $event)" >
                </div>
            </div>



            <fieldset class="form-group">
                <div class="row">
                    <legend class="col-form-label col-sm-2 pt-0">ประเภทตัวเลือก</legend>
                    <div class="col-sm-10">
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="choice_type" id="choiceTypeText" value="ข้อความ" (change)="showChoiceTypeText()" checked [(ngModel)]="quiz.choice_type">
                            <label class="form-check-label" for="choiceTypeText">
                                ข้อความ
                            </label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="choice_type" id="choiceTypePic" value="รูปภาพ" (change)="showChoiceTypePic()" [(ngModel)]="quiz.choice_type">
                            <label class="form-check-label" for="choiceTypePic">
                                รูปภาพ
                            </label>
                        </div>
                    </div>
                </div>
            </fieldset>

            <div class="form-group row" *ngIf="selectedChoiceTypeText">
                <label for="inputChoice1Text" class="col-sm-2 col-form-label">ตัวเลือก 1</label>
                <div class="col-sm-10">
                    <input type="text" class="form-control" id="inputChoice1Text" name="choice_1" placeholder="ตัวเลือก 1" [(ngModel)]="quiz.choice_1">
                </div>
            </div>

            <div class="form-group row" *ngIf="!selectedChoiceTypeText">
                <label for="inputQuizPic" class="col-sm-2 col-form-label">ไฟล์ตัวเลือก 1</label>
                <div class="col-sm-10">
                    <input type="file" class="form-control" id="inputQuizPic" name="choice_1" (change)="upload('choice1', $event)">
                </div>
            </div>

            <div class="form-group row" *ngIf="selectedChoiceTypeText">
                <label for="inputChoice2Text" class="col-sm-2 col-form-label">ตัวเลือก 2</label>
                <div class="col-sm-10">
                    <input type="text" class="form-control" id="inputChoice2Text" name="choice_2" placeholder="ตัวเลือก 2" [(ngModel)]="quiz.choice_2">
                </div>
            </div>

            <div class="form-group row" *ngIf="!selectedChoiceTypeText">
                <label for="inputQuizPic" class="col-sm-2 col-form-label">ไฟล์ตัวเลือก 2</label>
                <div class="col-sm-10">
                    <input type="file" class="form-control" name="choice_2" id="inputQuizPic" (change)="upload('choice2', $event)">
                </div>
            </div>

            
            <fieldset class="form-group">
                <div class="row">
                    <legend class="col-form-label col-sm-2 pt-0">เฉลย</legend>
                    <div class="col-sm-10">
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="answer" id="answer1" value=1 checked [(ngModel)]="quiz.answer">
                            <label class="form-check-label" for="answer1">
                                ตัวเลือก 1
                            </label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="answer" id="answer2" value=2 [(ngModel)]="quiz.answer">
                            <label class="form-check-label" for="answer2">
                                ตัวเลือก 2
                            </label>
                        </div>
                    </div>
                </div>
            </fieldset>

            <div class="form-group row">
                <label for="inputTimmer" class="col-sm-2 col-form-label">เวลา (วินาที)</label>
                <div class="col-sm-10">
                    <input type="number" class="form-control" id="inputTimmer" value="30" min="1" max="60" step="1" name="timer" [(ngModel)]="quiz.timer">
                </div>
            </div>

            <div class="form-group row">
                <label for="inputPoint" class="col-sm-2 col-form-label">คะแนน</label>
                <div class="col-sm-10">
                    <input type="number" class="form-control" id="inputPoint" value="1" min="1" max="100" step="1" name="point" [(ngModel)]="quiz.point">
                </div>
            </div>


            <div class="form-group row">
                <div class="col-sm-10">
                    <button type="submit" class="btn btn-primary" style="margin-right: 20px;">บันทึก</button>
                    <button type="reset" class="btn btn-primary" style="margin-right: 20px;" (click)="onClear(quizForm)">ล้าง</button>
                    <button type="button" class="btn btn-primary" (click)="onCancel(quizForm)">ยกเลิก</button>
                </div>
            </div>
    </form>
</div>